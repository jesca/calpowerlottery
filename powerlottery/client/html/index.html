<template name="main">
  <!-- Signed in -->

  {{#if currentUser}}

  {{#contentFor "headerTitle"}}
  <div class="logo"></div>
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
  <button class="button button-clear" data-ion-popover="_sideMenu">{{> ionIcon icon="android-menu" class = "menu-icon"}}</button>
  {{/contentFor}}


{{#ionView}}

{{#ionContent}}
<div class = "row not-fullscreen" style="background-image:url('/img/test.jpg');" data-img-width="1700" data-img-height="1000">
  <div class = "col">
    <div class="row">
      <div class="col col-33"><div class = "circle"><h3 class = " white name">{{name}}</h3></div>    </div>

      <div class = "row main-info">
        <div class="col col-33 white">
        {{#if ac_on}}
            {{> ionIcon icon="ios-circle-filled" class = "ac-on main-icons"}}
            <p class = "centered white">AC On</p>
        {{else}}
            {{#if ac_disconnected}}
                {{> ionIcon icon="ios-circle-outline" class = "ac-off main-icons"}}
                <p class = "centered white">AC Disconnected</p>
            {{else}}
                {{> ionIcon icon="ios-circle-outline" class = "ac-off main-icons"}}
                <p class = "centered white">AC Off</p>
            {{/if}}
        {{/if}}
        </div>
        <div class="col col-33">  <h2 class = "white ">{{tokens}}</h2> <p class = "white"> tokens</p>
        </div>
        <div class="col"><h2 class = "white">{{offers_completed}} </h2>  <p class = "white"> offers </p> </div>
      </div>
    </div>
  </div>
</div>

{{#if hasOffer}}
<div class="row">
    <div class="col">
        <div class="card">
            <div class="item item-text-wrap">
                <div class="row">
                    <div class="col"></div>
                    Time left to accept offer:<br>
                    {{minutes}}:{{seconds}}
                    <br><br>
                    Tokens offered: {{offer.tokensOffered}}
                    to keep your AC off for 60 minutes
                    <div class="col"></div>
                    {{#if ac_on}}
                        <button class="button button-light">
                        Turn AC Off to Accept
                        </button>
                    {{else}}
                        {{#if ac_disconnected}}
                            <button class="button button-light">
                            Connect AC to accept
                            </button>
                        {{else}}
                            <button id="acceptOffer" class="button button-balanced">
                            Accept Offer
                            </button>
                        {{/if}}
                    {{/if}}
                </div>
            </div>
        </div>
    </div>
</div>
{{/if}}

{{#if inGame}}
<div class="row">
    <div class="col">
        <div class="card">
            <div class="item item-text-wrap">
                <div class="row">
                Keep it up! Keep your AC OFF for:
                    {{minutes}}:{{seconds}}

                </div>
            </div>
        </div>
    </div>
</div>
{{/if}}

{{#if failed}}
<div class="row">
    <div class="col">
        <div class="card">
            <div class="item item-text-wrap">
                <div class="row">
                    Sorry, we detected that your AC was disconnected or turned on before time was up.
                    You have been disqualified from this challenge.

                     <button id = "acknowledgeFailure" class="button button-assertive">
                        OK
                      </button>
                </div>
            </div>
        </div>
    </div>
</div>
{{/if}}


{{#if success}}
<div class="row">
    <div class="col">
        <div class="card">
            <div class="item item-text-wrap">
                <div class="row">
                   Awesome! {{ offer.tokensOffered }} tokens have been added to your account.
                    <button id = "acknowledgeSuccess" class="button button-energized">
                        OK
                    </button>

                </div>
            </div>
        </div>
    </div>
</div>
{{/if}}


{{/ionContent}}
{{> _tabs}}

{{/ionView}}
{{/if}}

</template>
